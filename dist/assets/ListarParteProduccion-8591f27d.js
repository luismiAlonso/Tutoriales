import{r as n,j as a}from"./index-c9f7c851.js";import{u as ie,P as R,C as oe}from"./useInfiniteLoaderParteProducion-40ec8a6c.js";import{u as ne,a as de}from"./useOrdenProductionStore-9340e8f0.js";import{u as se}from"./useOrdenProduccionData-584d78df.js";import{u as j}from"./useCustomDatepicker-f33899c5.js";import{F as ue,C as re,L as ce,I as pe}from"./filtersComponent-4173453f.js";import{B as fe}from"./BackButtonComponent-2a9031fc.js";import"./dateUtil-160cab1d.js";const k=[{title:"IDPARTE",idInput:"idParte",value:1,content:"",type:"noInput",editable:!0,visible:!0,defaultValue:1,additionalStyles:"",options:[""],placeHolder:""},{title:"FECHA",idInput:"fecha",value:"",content:"",type:"noInput",editable:!0,visible:!0,defaultValue:"",additionalStyles:"",options:[""],placeHolder:""},{title:"IDPRODUCT",idInput:"indiceProducto",value:"0",content:"",type:"noInput",editable:!1,visible:!0,defaultValue:"0",additionalStyles:"",options:[""],placeHolder:""},{title:"BAMBURI",idInput:"bamburi",value:"",content:"",type:"noInput",editable:!0,visible:!0,defaultValue:"",additionalStyles:"",options:[""],placeHolder:""},{title:"TIPOGOMA",idInput:"tipoGoma",value:"",content:"",type:"noInput",editable:!0,visible:!0,defaultValue:"",additionalStyles:"",options:[""],placeHolder:""},{title:"OPERARIO",idInput:"operario",value:1,content:"",type:"noInput",editable:!1,visible:!0,defaultValue:1,additionalStyles:"",options:[""],placeHolder:""},{title:"PASADA",idInput:"pasada",value:1,content:"",type:"noInput",editable:!1,visible:!0,defaultValue:1,additionalStyles:"",options:[""],placeHolder:""},{title:"TIPO",idInput:"tipo",value:"R1",content:"",type:"noInput",editable:!1,visible:!0,additionalStyles:"",defaultValue:"R1",options:[],placeHolder:""},{title:"COLOR",idInput:"color",value:"NEGRO",content:"",type:"noInput",editable:!1,visible:!0,defaultValue:"NEGRO",additionalStyles:"",options:[],placeHolder:""},{title:"MOLDE",idInput:"molde",content:"",value:"BIRK",type:"noInput",editable:!1,visible:!0,additionalStyles:"",defaultValue:"BIRK",options:[],placeHolder:""},{title:"PLANCH OB.",idInput:"planchaobtenidas",content:"",value:"2x6",type:"noInput",editable:!1,visible:!0,additionalStyles:"",defaultValue:"2x6",options:["2x6","2x7"],placeHolder:""},{title:"PESO",idInput:"peso",type:"noInput",content:"",value:6,editable:!1,visible:!0,defaultValue:6,options:[""],additionalStyles:"",placeHolder:""},{title:"FORMULAS",idInput:"formulas",type:"noInput",content:"",value:1,editable:!1,visible:!0,defaultValue:1,options:[""],additionalStyles:"",placeHolder:""},{title:"PLANCHAS",idInput:"planchas",type:"noInput",content:"",value:1,editable:!1,visible:!0,defaultValue:1,options:[""],additionalStyles:"",placeHolder:""},{title:"ACELERANTES",idInput:"acelerantes",type:"noInput",content:"",value:"1550-2970",editable:!1,visible:!0,defaultValue:"1550-2970",additionalStyles:"",options:["1550-2970","136-276","1400-2500","1380-2780"],placeHolder:""},{title:"Editar",idInput:"Editar",content:"",value:"",type:"svg",editable:!1,visible:!0,additionalStyles:"",options:[],placeHolder:""},{title:"Borrar",idInput:"Borrar",content:"",value:"",type:"svg",editable:!1,visible:!0,additionalStyles:"",options:[],placeHolder:""}],be=()=>{const[I,p]=n.useState(!1),[d,c]=n.useState("desc"),[s,f]=n.useState([]),[b,h]=n.useState([]),[u]=n.useState(["idParte","fecha","indiceProducto","operario","pasada","tipo","color","molde","planchasObtenidas","peso","formulas","planchas","acelerantes"]),{mapColumnDescriptorsToProducto:y,mapearProductoAColumnas:N,updateColumnProduct:F,updateOrdenProduccion:w,getAllProductAndAllOrder:G,getOrdenProduccionById:U}=se(),{listaTotalProduccion:o,setListaTotalProduccion:r,setListaProductosOrdenReciente:K}=ne(),[v,g]=n.useState(u[0]),{filterData:C,filterByWords:W,filterDateRange:Y}=de(),D=(e,t)=>{e==="orden01"&&(c(t.sortDirection),o&&C(o,v,t.sortDirection).then(l=>{r(l)}))},{selectedDate:L,changeSelectedDate:x}=j(new Date,{onSelectedDateChanged:e=>{A(e,H)}}),{selectedDate:H,changeSelectedDate:O}=j(new Date,{onSelectedDateChanged:e=>{A(L,e)}}),A=(e,t)=>{e&&t&&e<=t&&b&&Y(b,"fecha",e,t,d).then(l=>{r(l)})},[z,q]=n.useState(),{currentPage:J,itemsPerPage:Q,loadedData:X,setLoadedData:Z,calculateItemToDisplay:_,loadMoreData:$}=ie(20),ee=()=>{G().then(e=>{e&&(h(e),r(e),K(e))})},E=()=>{},V=()=>{},te=(e,t)=>{const l=typeof e=="number"?e.toString():e;if(l.toLowerCase()==="editar"){if(p(!0),o){const M=N(R,o[t].idParte,o[t]);f(M)}}else l.toLowerCase()==="aceptaredicion"&&U(s[0].value).then(i=>{if(s&&i){const S=y(s,i==null?void 0:i.idParte);S.fecha=i.fecha,S.tipoGoma=i.TipoGoma,i.ordenesProduccion=i.ordenesProduccion.map(P=>P.indiceProducto===S.indiceProducto?S:P),w(i).then(P=>{P&&r(i.ordenesProduccion)}),p(!1)}})},ae=(e,t)=>{if(I){const l=F(s,t,e,R);l&&f(l)}},m=e=>{const t=e.target.value;g(t)},T=async(e,t)=>{if(e==="byWords")try{if(t==="")r(b);else{const l=await W(o,t,v,"asc");r(l)}}catch(l){console.error("Error al filtrar por palabras: ",l)}},B=e=>{g(e),o&&C(o,e,"desc").then(t=>{r(t)})},le=[{type:"text",idInput:"byWords",activeButton:!1,activeSearchIcon:!0,placeHolder:"write to search...",activeLabel:!0,typeFill:"search",style:"block w-32 p-1 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",readonly:!0,onChange:E,onClick:V,onFilter:T},{idInput:"selectPropiedades",type:"select",activeLabel:!0,optionsSelect:u,idSelected:"selectPropiedades",selectClassName:"mt-4 mb-4 w-1/4",value:v,defaultValue:u[0],onSeleccion:m,onFilter:B,onChange:m},{idInput:"selectedStartDate",activeLabel:!0,type:"date",language:"ES",formTarget:"dd/MM/yyyy",labelClearButton:"Limpar",name:"selectedStartDate",onSelectedDateChanged:x},{idInput:"selectedEndDate",activeLabel:!0,type:"date",language:"ES",formTarget:"dd/MM/yyyy",labelClearButton:"Limpar",name:"selectedEndDate",onSelectedDateChanged:O},{idInput:"Orden",type:"toggle",activeLabel:!0,valueProp:!0,trueText:"asc",falseText:"desc",onChange:D}];return{listadoTitulosPropiedades:u,selectPropiedades:v,ordenData:d,listaPartesLaminacion:z,selectedStartDate:L,selectedEndDate:H,currentPage:J,itemsPerPage:Q,loadedData:X,editMode:I,datosLineaMod:s,plantillaFiltersListados:le,setDatosLineaMod:f,setEditMode:p,setLoadedData:Z,calculateItemToDisplay:_,loadMoreData:$,setListaPartesLaminacion:q,changeSelectedEndDate:O,changeSelectedStartDate:x,setOrdenData:c,handleToggleChange:D,cargarDatosListaPartesProduccion:ee,handleFilter:B,handleSelection:m,handleInputChange:ae,handleButtonClick:te,handleFilterChange:T,handleInputTextClick:V,handleInputTextChange:E}},ye=[{title:"IDPARTE",idInput:"idParte",value:1,content:"",type:"noInput",editable:!0,visible:!0,defaultValue:1,additionalStyles:"",options:[""],placeHolder:""},{title:"FECHA",idInput:"fecha",value:"",content:"",type:"noInput",editable:!0,visible:!0,defaultValue:"",additionalStyles:"",options:[""],placeHolder:""},{title:"IDPRODUCT",idInput:"indiceProducto",value:"0",content:"",type:"noInput",editable:!1,visible:!0,defaultValue:"0",additionalStyles:"",options:[""],placeHolder:""},{title:"BAMBURI",idInput:"bamburi",value:"",content:"",type:"noInput",editable:!0,visible:!0,defaultValue:"",additionalStyles:"",options:[""],placeHolder:""},{title:"TIPOGOMA",idInput:"tipoGoma",value:"",content:"",type:"noInput",editable:!0,visible:!0,defaultValue:"",additionalStyles:"",options:[""],placeHolder:""},{title:"OPERARIO",idInput:"operario",value:1,content:"",type:"noInput",editable:!1,visible:!0,defaultValue:1,additionalStyles:"",options:[""],placeHolder:""},{title:"PASADA",idInput:"pasada",value:1,content:"",type:"noInput",editable:!1,visible:!0,defaultValue:1,additionalStyles:"",options:[""],placeHolder:""},{title:"TIPO",idInput:"tipo",value:"R1",content:"",type:"noInput",editable:!1,visible:!0,additionalStyles:"",defaultValue:"R1",options:[],placeHolder:""},{title:"COLOR",idInput:"color",value:"NEGRO",content:"",type:"noInput",editable:!1,visible:!0,defaultValue:"NEGRO",additionalStyles:"",options:[],placeHolder:""},{title:"MOLDE",idInput:"molde",content:"",value:"BIRK",type:"noInput",editable:!1,visible:!0,additionalStyles:"",defaultValue:"BIRK",options:[],placeHolder:""},{title:"PLANCH OB.",idInput:"planchaobtenidas",content:"",value:"2x6",type:"noInput",editable:!1,visible:!0,additionalStyles:"",defaultValue:"2x6",options:["2x6","2x7"],placeHolder:""},{title:"PESO",idInput:"peso",type:"noInput",content:"",value:6,editable:!1,visible:!0,defaultValue:6,options:[""],additionalStyles:"",placeHolder:""},{title:"FORMULAS",idInput:"formulas",type:"noInput",content:"",value:1,editable:!1,visible:!0,defaultValue:1,options:[""],additionalStyles:"",placeHolder:""},{title:"PLANCHAS",idInput:"planchas",type:"noInput",content:"",value:1,editable:!1,visible:!0,defaultValue:1,options:[""],additionalStyles:"",placeHolder:""},{title:"ACELERANTES",idInput:"acelerantes",type:"noInput",content:"",value:"1550-2970",editable:!1,visible:!0,defaultValue:"1550-2970",additionalStyles:"",options:["1550-2970","136-276","1400-2500","1380-2780"],placeHolder:""},{title:"",idInput:"Editar",content:"",value:"",type:"svg",editable:!1,visible:!0,additionalStyles:"",options:[],placeHolder:""},{title:"",idInput:"Borrar",content:"",value:"",type:"svg",editable:!1,visible:!0,additionalStyles:"",options:[],placeHolder:""}];function De(){const{currentPage:I,itemsPerPage:p,loadedData:d,editMode:c,datosLineaMod:s,plantillaFiltersListados:f,loadMoreData:b,cargarDatosListaPartesProduccion:h,handleInputChange:u,handleButtonClick:y}=be();return n.useEffect(()=>{h()},[]),a.jsxs("div",{children:[a.jsxs("div",{className:"bg-zinc-700 p-4 rounded mb-6 flex justify-between items-center",children:[a.jsx("div",{className:"flex-grow text-left",children:a.jsx("h2",{children:"LISTADO PARTES LAMINACION"})}),a.jsx("div",{children:a.jsx(fe,{})})]}),a.jsx(ue,{filters:f}),c&&a.jsx(re,{columns:s,rowIndex:0,onInputChange:u,onButtonClick:y}),a.jsx("div",{className:"block custom:hidden",children:!c&&a.jsx(ce,{data:d,columns:k,onClick:y})}),a.jsx("div",{className:"hidden custom:block",children:!c&&d&&d.length>0&&a.jsx(pe,{dataLength:I*p,next:b,hasMore:!0,loader:a.jsx("h4",{}),endMessage:a.jsx("p",{style:{textAlign:"center"},children:a.jsx("b",{children:"Yay! You have seen it all"})}),children:a.jsx(oe,{columns:ye,dataColumn:k,data:d,onInputChange:u,onButtonClick:y})})})]})}export{De as default};
