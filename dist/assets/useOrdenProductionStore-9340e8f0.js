import{r as D,j as h,d as x}from"./index-c9f7c851.js";import{b as S,d as w,e as C,f as I}from"./dateUtil-160cab1d.js";const Y=({idInput:r,editable:s,activeLabel:e,options:t,value:n,defaultValue:o="",additionalStyles:c,onChange:a})=>{const[i,l]=D.useState(!1),[v,N]=D.useState(""),[d,y]=D.useState(t),m=D.useRef(null);D.useEffect(()=>{n!==void 0?N(n):o&&N(o);function u(b){m.current&&!m.current.contains(b.target)&&l(!1)}return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[n,o]);const P=u=>{N(u),g(u),a&&a(u)},g=u=>{y(t.filter(b=>b.toLowerCase().includes(u.toLowerCase()))),l(!0)},f=u=>{l(!1),N(u),a&&a(u)},T="w-full px-3 py-2 text-gray-900 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500";return h.jsxs("div",{className:"relative",ref:m,children:[e&&h.jsx("label",{children:r}),h.jsx("input",{type:"text",value:v,readOnly:!s,onChange:u=>P(u.target.value),className:c||T,onFocus:()=>l(!0)}),i&&s&&h.jsx("ul",{className:"absolute w-full mt-2 text-white bg-gray-50 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 z-50",children:d.map((u,b)=>h.jsx("li",{onClick:()=>f(u),className:"cursor-pointer hover:bg-gray-500 p-2",children:u},b))})]})};function L(r,s,e){let t=[];try{if(!r||r.length===0)return t;const n=r[0];let o="string";if(F(n[s]))o="number";else if(k(n[s]))o="date";else{const c=O(n[s]);c&&typeof c=="object"&&c.numeric!==null&&(o="especial")}switch(o){case"number":t=B(r,s,e);break;case"date":t=j(r,s,e);break;case"especial":t=p(r,s,e);break;default:t=E(r,s,e)}}catch(n){return console.error(n),r}return t}function A(r,s,e,t){let n=[];try{if(console.log("palabra a buscar: ",s),r===void 0||r.length===0)return n;const o=r[0];let c;switch(F(o[e])?c="number":k(o[e])?(console.log(o[e]),c="date"):c="string",c){case"number":n=$(r,s,e,t);break;case"date":n=R(r,s,e,t);break;default:n=R(r,s,e,t)}}catch(o){return console.log(o),r}return n}function p(r,s,e){try{const t=[...r];return t.sort((n,o)=>{const c=O(n[s]),a=O(o[s]),i=c.numeric??0,l=a.numeric??0;return isNaN(i)&&isNaN(l)?0:isNaN(i)?e==="asc"?-1:1:isNaN(l)?e==="asc"?1:-1:e==="asc"?i-l:l-i}),t.map(n=>{const o=O(n[s]);return n[s]=`${o.numeric??"N/A"} ${o.grammatical}`,n})}catch(t){return console.error(t),r}}function E(r,s,e){try{const t=[...r];return t.sort((n,o)=>{const c=n[s],a=o[s];return typeof c=="string"&&typeof a=="string"?e==="asc"?c.localeCompare(a):a.localeCompare(c):typeof c=="string"?e==="asc"?1:-1:typeof a=="string"?e==="asc"?-1:1:0}),t}catch(t){return console.error(t),r}}function B(r,s,e){try{const t=[...r];return t.sort((n,o)=>{const c=parseFloat(n[s]),a=parseFloat(o[s]);return isNaN(c)&&isNaN(a)?0:isNaN(c)?e==="asc"?-1:1:isNaN(a)?e==="asc"?1:-1:e==="asc"?c-a:a-c}),t}catch(t){return console.error(t),r}}function j(r,s,e){try{const t=[...r];return t.sort((n,o)=>{const c=new Date(n[s]),a=new Date(o[s]);return isNaN(c.getTime())&&isNaN(a.getTime())?0:isNaN(c.getTime())?e==="asc"?-1:1:isNaN(a.getTime())?e==="asc"?1:-1:e==="asc"?c.getTime()-a.getTime():a.getTime()-c.getTime()}),t}catch(t){return console.error(t),r}}function R(r,s,e,t){try{return r.filter(o=>{console.log(o[e],e);const a=String(o[e]).toLowerCase().includes(s.toLowerCase());return o[e]!=null&&a}).sort((o,c)=>t==="asc"?String(o[e]||"").localeCompare(String(c[e]||"")):String(c[e]||"").localeCompare(String(o[e]||"")))}catch(n){return console.log(n),r}}function $(r,s,e,t){try{return r.filter(n=>{if(n[e]==null)return!1;const o=n[e].toString();return s.startsWith("0")?o===s.substring(1):o.includes(s)}).sort((n,o)=>t==="asc"?(parseFloat(n[e])||0)-(parseFloat(o[e])||0):(parseFloat(o[e])||0)-(parseFloat(n[e])||0))}catch{return r}}const W=(r,s,e,t,n)=>r.filter(c=>{const a=c[t];if(!a)return!1;const i=S(a);return i?w(i,e,s):null}).sort((c,a)=>{const i=S(c[t]),l=S(a[t]);return n==="asc"?C(i,l):I(i,l)});function O(r){if(typeof r!="string")return{numeric:null,grammatical:r??"N/A"};const s=/(\d+\.?\d*)\s*([a-zA-Z]+)/,e=r.match(s);if(e){const[,t,n]=e;return{numeric:parseFloat(t),grammatical:n}}else return{numeric:null,grammatical:r}}function k(r){return/^([0-2][0-9]|3[0-1])(\/|-)(0[1-9]|1[0-2])\2(\d{4})$/.test(r)}function F(r){return!!/^-?\d*\.?\d+$/.test(r)}const z=x(r=>({notifications:[],addNotification:s=>r(e=>({notifications:[...e.notifications,s]})),setNotifications:s=>r({notifications:s})}));function Z(){const[r,s]=D.useState([]),[e,t]=D.useState(""),[n,o]=D.useState("asc"),[c,a]=D.useState(!1),{addNotification:i}=z();return{sortedDataProperties:r,property:e,ordenProperties:n,isFiltered:c,filterDateRange:async(d,y,m,P,g)=>{try{const f=W(d,P,m,y,g);return s(f),a(!0),f}catch(f){return i({message:`Error en filterData by date range: ${f}`,type:"error"}),[]}},setOrdenProperties:o,setProperty:t,filterData:async(d,y,m)=>new Promise((P,g)=>{try{if(a(!1),!d||d.length===0||!y||!m){i({message:"Error en la entrada de datos",type:"error"}),g("No se pudieron ordenar los datos");return}const f=L(d,y,m);s(f),a(!0),P(f)}catch(f){a(!1),console.error("Error en filterData:",f),i({message:`Error en filterData: ${f}`,type:"error"}),g(f)}}),filterByWords:async(d,y,m,P)=>{try{return y===""?d:A(d,y,m,P)}catch(g){throw i({message:`Error en filterData by Words: ${g}`,type:"error"}),g}}}}const q=x((r,s)=>({totalProductosInventario:[],ordenesProduccion:[],ordenReciente:null,listaProductosOrdenReciente:[],listaTotalProduccion:[],productoActual:null,columnDescriptors:[],addOrdenProduccion:e=>r(t=>({ordenesProduccion:[...t.ordenesProduccion,e],ordenReciente:e})),removeOrdenProduccion:e=>r(t=>({ordenesProduccion:t.ordenesProduccion.filter(n=>n.idParte!==e)})),updateOrdenProduccion:(e,t)=>r(n=>({ordenesProduccion:n.ordenesProduccion.map(o=>o.idParte===e?{...o,...t}:o),ordenReciente:n.ordenReciente&&e===n.ordenReciente.idParte?{...n.ordenReciente,...t}:n.ordenReciente})),getOrdenProduccion:e=>s().ordenesProduccion.find(n=>n.idParte===e),setListaTotalProduccion:e=>r(()=>({listaTotalProduccion:e})),getListaTotalProduccion:()=>s().listaTotalProduccion,setListaTotalProductosInventario:e=>r(()=>({totalProductosInventario:e})),getListaTotalProductosInventario:()=>s().totalProductosInventario,setOrdenReciente:e=>r(()=>({ordenReciente:e})),setOrdenesProduccion:e=>r(()=>({ordenesProduccion:e})),setProductoActual:e=>r(()=>({productoActual:e})),setColumnDescriptors:e=>r(()=>({columnDescriptors:e})),setInputValue:(e,t)=>{r(n=>({columnDescriptors:n.columnDescriptors.map(o=>o.idInput===e?{...o,value:t}:o)}))},getInputValue:e=>{const t=s().columnDescriptors.find(n=>n.idInput===e);return t==null?void 0:t.value},setListaProductosOrdenReciente:e=>r(()=>({listaProductosOrdenReciente:e})),getListaProductosOrdenReciente:()=>s().listaProductosOrdenReciente}));export{Y as H,Z as a,q as u};
